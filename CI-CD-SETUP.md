# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –¥–ª—è Go1FL Sprint 11

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ Docker –æ–±—Ä–∞–∑–æ–≤ –≤ DockerHub –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞.

## üìã –û–±–∑–æ—Ä

–ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CI/CD pipeline –≤–∫–ª—é—á–∞–µ—Ç –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö job'–∞:

### 1. üß™ Test Job (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞)
- **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: –ü—Ä–∏ –∫–∞–∂–¥–æ–º push –∏ pull request
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç**:
  - –ü—Ä–æ–≤–µ—Ä–∫—É —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (`gofmt`)
  - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å –ø–æ–º–æ—â—å—é `go vet`
  - –õ–∏–Ω—Ç–∏–Ω–≥ —Å `golangci-lint`
  - –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
  - –ü—Ä–æ–≤–µ—Ä–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –°–±–æ—Ä–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 2. üê≥ Docker Publish Job (–ü—É–±–ª–∏–∫–∞—Ü–∏—è –≤ DockerHub)
- **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: –¢–æ–ª—å–∫–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–µ–≥–æ–≤ –≤–µ—Ä—Å–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `v1.0.0`)
- **–í—ã–ø–æ–ª–Ω—è–µ—Ç**:
  - –°–±–æ—Ä–∫—É Docker –æ–±—Ä–∞–∑–∞ —Å multi-stage build
  - –ü—É–±–ª–∏–∫–∞—Ü–∏—é –≤ DockerHub —Å —Ç–µ–≥–∞–º–∏ –≤–µ—Ä—Å–∏–π
  - –ü–æ–¥–¥–µ—Ä–∂–∫—É multiple –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä (amd64, arm64)
  - –°–æ–∑–¥–∞–Ω–∏–µ GitHub Release —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º

## üîß –ù–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DockerHub —Å–µ–∫—Ä–µ—Ç–æ–≤

–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è GitHub:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
2. –î–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã:

```bash
# DockerHub –ª–æ–≥–∏–Ω (–≤–∞—à username)
DOCKERHUB_USERNAME=ykmn0

# DockerHub —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞ (—Å–æ–∑–¥–∞–π—Ç–µ –≤ DockerHub ‚Üí Account Settings ‚Üí Security)
DOCKERHUB_TOKEN=your_dockerhub_access_token
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ DockerHub Access Token

1. –í–æ–π–¥–∏—Ç–µ –≤ [DockerHub](https://hub.docker.com/)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Account Settings** ‚Üí **Security**
3. –ù–∞–∂–º–∏—Ç–µ **New Access Token**
4. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: **Read, Write, Delete**
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω –∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –∫–∞–∫ `DOCKERHUB_TOKEN`

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ DockerHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ DockerHub —Å –∏–º–µ–Ω–µ–º `go1fl-sprint11`
2. –ò–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `IMAGE_NAME` –≤ workflow —Ñ–∞–π–ª–µ –Ω–∞ –¥—Ä—É–≥–æ–µ –∏–º—è

## üèÉ‚Äç‚ôÇÔ∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∫–∞–∂–¥–æ–º push:

```bash
git add .
git commit -m "Add new feature"
git push origin main
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ª–∏–∑–∞ —Å Docker –æ–±—Ä–∞–∑–æ–º

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–∞ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ Docker –æ–±—Ä–∞–∑–∞:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–≥–∞ –≤–µ—Ä—Å–∏–∏
git tag v1.0.0
git push origin v1.0.0
```

–≠—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ó–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã
- –°–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑
- –û–ø—É–±–ª–∏–∫—É–µ—Ç –æ–±—Ä–∞–∑ –≤ DockerHub —Å —Ç–µ–≥–∞–º–∏:
  - `ykmn0/go1fl-sprint11:v1.0.0`
  - `ykmn0/go1fl-sprint11:1.0`
  - `ykmn0/go1fl-sprint11:1`
  - `ykmn0/go1fl-sprint11:latest`
- –°–æ–∑–¥–∞—Å—Ç GitHub Release

## üê≥ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker –æ–±—Ä–∞–∑–∞

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
docker run -p 8080:8080 ykmn0/go1fl-sprint11:latest

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≤–µ—Ä—Å–∏–∏
docker run -p 8080:8080 ykmn0/go1fl-sprint11:v1.0.0

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
docker run -p 8080:8080 -v $(pwd)/data:/app/data ykmn0/go1fl-sprint11:latest
```

### Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–æ–∑–¥–∞–π—Ç–µ `docker-compose.yml`:

```yaml
version: '3.8'
services:
  app:
    image: ykmn0/go1fl-sprint11:latest
    ports:
      - "8080:8080"
    volumes:
      - ./data:/app/data
    environment:
      - ENV=production
    restart: unless-stopped
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ workflow

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Actions** tab –≤ GitHub
2. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π workflow run
3. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –∫–∞–∂–¥–æ–≥–æ job'–∞

### –õ–æ–∫–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ª–æ–∫–∞–ª—å–Ω–æ
go test -v ./... -coverprofile=coverage.out

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–∫—Ä—ã—Ç–∏—è –∫–æ–¥–∞
go tool cover -html=coverage.out

# –õ–æ–∫–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
docker build -t go1fl-sprint11:local .

# –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
golangci-lint run
```

## üîß –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ª–∏–Ω—Ç–µ—Ä–∞

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.golangci.yml` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª –ª–∏–Ω—Ç–∏–Ω–≥–∞.

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ Docker –æ–±—Ä–∞–∑–∞

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `Dockerfile` –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–±–æ—Ä–∫–∏.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫

–†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.github/workflows/ci-cd.yml` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö steps.

## üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ DockerHub

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å `DOCKERHUB_USERNAME` –∏ `DOCKERHUB_TOKEN`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ Docker

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å `Dockerfile`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

### –û—à–∏–±–∫–∏ —Ç–µ—Å—Ç–æ–≤

- –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ: `go test -v ./...`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π Go

## üìà –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Slack, Discord –∏–ª–∏ email –ø—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π/–Ω–µ—É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–µ.

### Deployment –≤ Kubernetes

–ú–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å pipeline –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ—è –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä.

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å security —Å–∫–∞–Ω–µ—Ä–∞–º–∏

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ security –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–∞ Trivy, Snyk –∏ –¥—Ä.

---

üí° **–°–æ–≤–µ—Ç**: –ù–∞—á–Ω–∏—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö —Ç–µ–≥–æ–≤ —Ç–∏–ø–∞ `v0.1.0` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞, –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π —Å—Ö–µ–º–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.